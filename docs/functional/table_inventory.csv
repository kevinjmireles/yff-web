# Canonical schema docs (V2.1). Functional docs must reference this file.
table,purpose,primary_key,unique_indexes,rls_posture,notes
profiles,Subscriber identity + address â†’ OCD IDs,user_id,email (unique),Owner-only (RLS),Client read optional; writes via server (recommended)
subscriptions,List membership (toggle unsubscribed_at),id,"(user_id, list_key) unique",Owner read optional; writes via server,HMAC unsubscribe; Edge function toggles unsubscribed_at
content_slices,Authored slices per article; scoped by OCD,id,"(article_key, section_order, coalesce(scope_ocd_id,''), sort_index) unique",Service-only,Imported via Make; no client access
delivery_history,Attempted sends (idempotency + audit),id,"(email, campaign_tag, send_batch_id) unique; provider_message_id unique",Service-only,Write per send; read by ops
delivery_events,Provider events (delivered/open/click/bounce/unsub),id,,Service-only,Ingested from SendGrid webhook
campaign_runs,Audit record of each admin-triggered send,id,,Service-only,Insert once per run
dead_letters,Permanent failures for inspection,id,,Service-only,Payload + error captured on hard failures
